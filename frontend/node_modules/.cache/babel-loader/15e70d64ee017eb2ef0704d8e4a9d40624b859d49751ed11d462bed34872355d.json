{"ast":null,"code":"import _objectSpread from\"D:/Timer Project/crafting-timer/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from'react';import ItemGroupList from'./components/ItemGroupList';import'./styles.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const audioRef=useRef(null);// Load from localStorage on first render\nconst[activeTimers,setActiveTimers]=useState(()=>{const saved=localStorage.getItem('activeTimers');if(!saved)return{};const parsed=JSON.parse(saved);const now=Date.now();// Remove expired timers\nconst validTimers={};for(const[id,endTime]of Object.entries(parsed)){if(endTime>now){validTimers[id]=endTime;}}return validTimers;});// Save to localStorage whenever timers change\nuseEffect(()=>{localStorage.setItem('activeTimers',JSON.stringify(activeTimers));},[activeTimers]);// Timer interval: update every second and play sound if done\nuseEffect(()=>{const interval=setInterval(()=>{setActiveTimers(prev=>{const updated=_objectSpread({},prev);const now=Date.now();for(const id in prev){if(typeof prev[id]==='number'&&prev[id]<=now){updated[id]='ready';if(audioRef.current){audioRef.current.play().catch(()=>{});}}}return updated;});},1000);return()=>clearInterval(interval);},[]);// Start or cancel a timer\nconst toggleTimer=(id,duration)=>{setActiveTimers(prev=>{const updated=_objectSpread({},prev);if(updated[id]){delete updated[id];}else{updated[id]=Date.now()+duration*1000;}return updated;});};// Get time left in seconds\nconst getTimeLeft=endTime=>{if(!endTime)return'';if(endTime==='ready')return'Ready!';const diff=endTime-Date.now();if(diff<=0)return'Done';const totalSeconds=Math.ceil(diff/1000);if(totalSeconds<60){return\"\".concat(totalSeconds,\"s\");}const totalMinutes=Math.floor(totalSeconds/60);const hours=Math.floor(totalMinutes/60);const minutes=totalMinutes%60;if(hours>0)return\"\".concat(hours,\"h \").concat(minutes,\"m\");return\"\".concat(minutes,\"m\");};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"web-title\",children:[\" \",/*#__PURE__*/_jsx(\"h1\",{children:\"Fantasy Online 2 Crafting Timers\"})]}),/*#__PURE__*/_jsx(\"audio\",{ref:audioRef,src:\"/done.mp3\",preload:\"auto\"}),/*#__PURE__*/_jsx(ItemGroupList,{activeTimers:activeTimers,toggleTimer:toggleTimer,getTimeLeft:getTimeLeft})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","ItemGroupList","jsx","_jsx","jsxs","_jsxs","App","audioRef","activeTimers","setActiveTimers","saved","localStorage","getItem","parsed","JSON","parse","now","Date","validTimers","id","endTime","Object","entries","setItem","stringify","interval","setInterval","prev","updated","_objectSpread","current","play","catch","clearInterval","toggleTimer","duration","getTimeLeft","diff","totalSeconds","Math","ceil","concat","totalMinutes","floor","hours","minutes","style","padding","children","className","ref","src","preload"],"sources":["D:/Timer Project/crafting-timer/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport ItemGroupList from './components/ItemGroupList';\r\nimport './styles.css';\r\n\r\n\r\nfunction App() {\r\n  const audioRef = useRef(null);\r\n\r\n  // Load from localStorage on first render\r\n  const [activeTimers, setActiveTimers] = useState(() => {\r\n    const saved = localStorage.getItem('activeTimers');\r\n    if (!saved) return {};\r\n    const parsed = JSON.parse(saved);\r\n    const now = Date.now();\r\n\r\n    // Remove expired timers\r\n    const validTimers = {};\r\n    for (const [id, endTime] of Object.entries(parsed)) {\r\n      if (endTime > now) {\r\n        validTimers[id] = endTime;\r\n      }\r\n    }\r\n    return validTimers;\r\n  });\r\n\r\n  // Save to localStorage whenever timers change\r\n  useEffect(() => {\r\n    localStorage.setItem('activeTimers', JSON.stringify(activeTimers));\r\n  }, [activeTimers]);\r\n\r\n  // Timer interval: update every second and play sound if done\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      setActiveTimers(prev => {\r\n        const updated = { ...prev };\r\n        const now = Date.now();\r\n\r\n        for (const id in prev) {\r\n          if (typeof prev[id] === 'number' && prev[id] <= now) {\r\n            updated[id] = 'ready';\r\n            if (audioRef.current) {\r\n              audioRef.current.play().catch(() => {});\r\n            }\r\n          }\r\n        }\r\n\r\n        return updated;\r\n      });\r\n    }, 1000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // Start or cancel a timer\r\n  const toggleTimer = (id, duration) => {\r\n    setActiveTimers(prev => {\r\n      const updated = { ...prev };\r\n      if (updated[id]) {\r\n        delete updated[id];\r\n      } else {\r\n        updated[id] = Date.now() + duration * 1000;\r\n      }\r\n      return updated;\r\n    });\r\n  };\r\n\r\n  // Get time left in seconds\r\n  const getTimeLeft = (endTime) => {\r\n    if (!endTime) return '';\r\n    if (endTime === 'ready') return 'Ready!';\r\n\r\n    const diff = endTime - Date.now();\r\n    if (diff <= 0) return 'Done';\r\n\r\n    const totalSeconds = Math.ceil(diff / 1000);\r\n    if (totalSeconds < 60) {\r\n      return `${totalSeconds}s`;\r\n    }\r\n\r\n    const totalMinutes = Math.floor(totalSeconds / 60);\r\n    const hours = Math.floor(totalMinutes / 60);\r\n    const minutes = totalMinutes % 60;\r\n\r\n    if (hours > 0) return `${hours}h ${minutes}m`;\r\n    return `${minutes}m`;\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '20px' }}>\r\n      <div className=\"web-title\"> <h1>Fantasy Online 2 Crafting Timers</h1></div> \r\n      <audio ref={audioRef} src=\"/done.mp3\" preload=\"auto\" />\r\n      <ItemGroupList\r\n        activeTimers={activeTimers}\r\n        toggleTimer={toggleTimer}\r\n        getTimeLeft={getTimeLeft}\r\n      />\r\n\r\n    </div>\r\n    \r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}